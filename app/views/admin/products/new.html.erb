<div class="container">

<h3>商品新規登録</h3>
<%= form_with model: @product, url:'/admin/products', local:true do |f| %>
<div class="row">
 <div class="col-md-5">
  <!--商品画像-->
  <div>
   <label for="inputImage">商品画像</label><br>
   <%= attachment_image_tag @product, :image, fallback: "no_image.jpg", id: "img_prev", style: "height: 300px; width:300px;" %><br>
   <%= f.attachment_field :image, placeholder: "商品画像" %>
  </div>
 </div>
 <div class="col-md-7">
  <!--商品名-->
  <div>
   <label for="inputName">商品名</label>
   <%= f.text_field :name, autiofocus: true, id:"inputName", placeholder:"商品名" %>
  </div>
  <!--商品説明-->
  <div>
   <label for="inputBody">商品説明</label>
   <%= f.text_area :body, autiofocus: true, id:"inputBody", placeholder:"商品説明" %>
  </div>
  <!--ジャンル選択-->
  <div>
   <label for="inputGenre">ジャンル</label>
   <%= f.collection_select :genre_id, Genre.all, :id, :type %>
  </div>
  <!--税抜価格-->
  <div>
   <label for="inputTax_out_price">税抜価格</label>
   <%= f.text_area :tax_out_price, autiofocus: true, id:"inputTax_out_price", placeholder:"税抜価格" %>
  </div>
  <!--販売ステータス-->
  <div>
   <label for="inputStstud">販売ステータス</label>
   <%= f.select :status, options_for_select(Product.statuses.keys) %>
  </div>
  <div class="actions">
   <%= f.submit '新規登録' %>
  </div>
 </div>
</div>
<% end %>

<!--画像プレビューのためのjs-->
<script>
$(document).on("turbolinks:load", function(){
  function readURL(input) {
    if(input.files && input.files[0]){
      var reader = new FileReader();
      reader.onload = function (e) {
        $('#img_prev').attr('src', e.target.result);
      }
      reader.readAsDataURL(input.files[0]);
    }
  }
  $('#product_image').change(function(){
    readURL(this);
  });
});
</script>

</div>


